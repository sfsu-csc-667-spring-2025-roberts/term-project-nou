<!DOCTYPE html>
<html lang="en">
  <head>
    <title>UNO Game - Playing</title>
  </head>
  <body>
    <div class="game-container">
      <h1>Game Room <%= gameId %></h1>
      
      <div class="game-board">
        <div class="discard-pile">
          <h2>Last Card Played</h2>
          <div class="card">
            <span class="color"><%= gameState.color %></span>
            <span class="value"><%= gameState.value %></span>
          </div>
        </div>

        <div class="current-player">
          <h2>Current Player</h2>
          <div id="current-player-info">
            <!-- Will be updated via WebSocket -->
          </div>
        </div>
      </div>

      <div class="player-hand">
        <h2>Your Hand</h2>
        <div id="player-cards">
          <!-- Will be updated via WebSocket -->
        </div>
      </div>
    </div>

    <script>
      const gameId = '<%= gameId %>';
      
      // WebSocket connection for real-time updates
      const ws = new WebSocket(`ws://${window.location.host}/games/${gameId}/ws`);
      
      ws.onmessage = (event) => {
        const data = JSON.parse(event.data);
        // Handle different types of updates
        switch(data.type) {
          case 'gameState':
            updateGameState(data.state);
            break;
          case 'playerHand':
            updatePlayerHand(data.cards);
            break;
          // Add more cases as needed
        }
      };

      function updateGameState(state) {
        const currentPlayerInfo = document.getElementById('current-player-info');
        currentPlayerInfo.innerHTML = `
          <span class="player-name">${state.currentPlayer}</span>
        `;
      }

      function updatePlayerHand(cards) {
        const playerCards = document.getElementById('player-cards');
        playerCards.innerHTML = cards.map(card => `
          <div class="card" data-card-id="${card.id}">
            <span class="color">${card.color}</span>
            <span class="value">${card.value}</span>
          </div>
        `).join('');
      }
    </script>
  </body>
</html> 