<!DOCTYPE html>
<html lang="en">
  <head>
    <title>UNO Game - Playing</title>
    <style>
      .game-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }
      .players-section {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 20px;
      }
      .player-section {
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
        min-width: 200px;
      }
      .player-name {
        font-size: 1.2em;
        font-weight: bold;
        margin-bottom: 10px;
        text-align: center;
      }
      .cards-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
      }
      .card {
        width: 60px;
        height: 90px;
        border: 1px solid #000;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: white;
        text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <h1>UNO Game - Room <%= gameId %></h1>
      
      <div class="players-section" id="players-section">
        <!-- Player sections will be added here -->
      </div>
    </div>

    <script>
      const gameId = '<%= gameId %>';
      
      async function fetchPlayersCards() {
        try {
          const response = await fetch(`/games/${gameId}/cards`);
          const data = await response.json();
          
          const playersSection = document.getElementById('players-section');
          playersSection.innerHTML = Object.values(data.players).map(player => `
            <div class="player-section">
              <div class="player-name">${player.username}</div>
              <div class="cards-container">
                ${player.cards.map(card => `
                  <div class="card" style="background-color: ${card.color}">
                    ${card.value}
                  </div>
                `).join('')}
              </div>
            </div>
          `).join('');
        } catch (error) {
          console.error('Error fetching players cards:', error);
        }
      }

      // Fetch cards initially and then every 5 seconds
      fetchPlayersCards();
      setInterval(fetchPlayersCards, 5000);
    </script>
  </body>
</html> 